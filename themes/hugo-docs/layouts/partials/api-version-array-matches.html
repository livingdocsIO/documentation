{{ $page := .page }}
{{ $endpoint := .endpoint }}

{{ $versions := slice }}
{{ if not $endpoint.apiVersionConstraints }}
  {{ $versions = partialCached "api-versions" $page true }}
{{ else }}
  {{ range $v := partialCached "api-versions" $page true }}
    {{ $matchesApiVersion := partial "api-version-matches" (dict "matcher" $endpoint.apiVersionConstraints "version" $v.version ) }}
    {{ if not $matchesApiVersion }}{{ continue }}{{ end }}
    {{ $versions = $versions | append $v }}
  {{ end }}
{{ end }}
{{ return $versions }}
