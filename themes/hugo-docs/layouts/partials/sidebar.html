<aside class="page__navigation" id="sidebar">
  <nav>
    <ul class="topics">
      <li class="topic{{ if (eq .CurrentSection .Site.Home )}} active{{ end }}"><a href="{{ .Site.Home.RelPermalink }}">Introduction</a></li>
    </ul>
  </nav>

  {{- partial "menu" (dict "menu" "learn" "title" "Learn" "context" .) -}}
  {{- partial "menu" (dict "menu" "reference" "title" "Reference" "context" .) -}}
  {{- partial "menu" (dict "menu" "guides" "title" "Guides" "context" .) -}}
  {{- partial "menu" (dict "menu" "customising" "title" "Customising" "context" .) -}}
  {{- partial "menu" (dict "menu" "operations" "title" "Operations" "context" .) -}}

  <script>
    // We always restore the scroll position right after
    // the menu is loaded to prevent flickering
    const sidebar = document.getElementById('sidebar')
    if(sessionStorage.menuScrollPosition) {
      sidebar.scrollTop = sessionStorage.getItem('menuScrollPosition')
    }

    window.addEventListener('beforeunload', function () {
      sessionStorage.setItem('menuScrollPosition', sidebar.scrollTop)
    })
  </script>
</aside>
